<% content_for :title, "Send Feedback" %>

<div class="px-8 xl:px-16 py-8">
  <%# Back Button %>
  <div class="pb-6">
    <%= render BackButtonComponent.new(label: "Home", href: authenticated? ? session_menu_path(script_name: nil) : root_path(script_name: nil)) %>
  </div>

  <div class="max-w-2xl mx-auto">
    <%# Page Title %>
    <div class="mb-8 text-center">
      <h1 class="font-black text-3xl sm:text-4xl text-zinc-900 uppercase tracking-tighter leading-none">
        Send us Feedback
      </h1>
      <p class="mt-3 text-zinc-600 font-mono text-sm">
        Bug reports, feature requests, or just say hi!
      </p>
    </div>

    <%= form_with url: site_feedback_path, method: :post, local: true, class: "font-sans" do |form| %>
      <%# Industrial Container %>
      <div class="bg-[#F8F5EC] border-[3px] border-zinc-900 shadow-[8px_8px_0px_0px_rgba(20,20,23,0.8)] relative">

        <%# Header Section %>
        <div class="p-6 border-b-[3px] border-zinc-900 bg-gradient-to-r from-violet-500 to-violet-600 relative">
          <div class="flex items-center justify-between">
            <span class="inline-flex items-center px-3 py-1 border-[2px] border-white/30 text-xs font-bold uppercase tracking-widest bg-white/20 text-white">
              <span class="mr-2 w-2 h-2 rounded-full bg-white animate-pulse"></span>
              APP FEEDBACK
            </span>
            <span class="font-mono text-[0.6rem] text-white/70 uppercase tracking-widest">
              FastRetro
            </span>
          </div>
        </div>

        <%# Contact Info (only for unauthenticated users) %>
        <% unless authenticated? %>
          <div class="p-6 border-b-[3px] border-zinc-900 bg-zinc-50 space-y-4">
            <div>
              <label class="block font-mono text-xs font-bold uppercase tracking-widest text-zinc-500 mb-2">
                Your Name
              </label>
              <input type="text" name="name" placeholder="Jane Doe"
                class="w-full px-4 py-3 border-[2px] border-zinc-900 bg-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
            </div>
            <div>
              <label class="block font-mono text-xs font-bold uppercase tracking-widest text-zinc-500 mb-2">
                Your Email <span class="text-red-500">*</span>
              </label>
              <input type="email" name="email" placeholder="jane@example.com" required
                class="w-full px-4 py-3 border-[2px] border-zinc-900 bg-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
            </div>
          </div>
        <% end %>

        <%# Message Area %>
        <div class="p-6 min-h-[200px] relative bg-[#F8F5EC]">
          <%# Background Grid %>
          <div class="absolute inset-0 pointer-events-none bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-[size:20px_20px]"></div>

          <div class="relative z-10">
            <label class="block font-mono text-xs font-bold uppercase tracking-widest text-zinc-500 mb-2">
              Your Message <span class="text-red-500">*</span>
            </label>
            <textarea name="message" rows="6" required placeholder="Tell us what's on your mind..."
              class="w-full px-4 py-3 border-[2px] border-zinc-900 bg-white font-sans text-base resize-none focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500"></textarea>
          </div>
        </div>

        <%# Footer %>
        <div class="px-6 py-4 border-t-[3px] border-zinc-900 bg-zinc-50 flex items-center justify-between text-xs font-mono uppercase text-zinc-500">
          <div class="flex items-center gap-2">
            <span class="font-bold text-zinc-900">FROM:</span>
            <span><%= Current.identity&.email_address || "You" %></span>
          </div>
          <div class="flex items-center gap-1">
            <span>TO:</span>
            <span class="text-zinc-900 font-bold">FASTRETRO TEAM</span>
          </div>
        </div>
      </div>

      <%# Submit Button %>
      <div class="flex justify-center mt-8">
        <button type="submit"
          class="group relative inline-flex items-center justify-center gap-2 px-8 py-4 bg-violet-600 text-white border-[2px] border-zinc-900 font-bold uppercase tracking-widest text-sm hover:-translate-y-1 hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:translate-y-0 active:shadow-none transition-all">
          Send Feedback
          <%= icon_tag "arrow-right", class: "text-xl" %>
        </button>
      </div>
    <% end %>
  </div>
</div>
