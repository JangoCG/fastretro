<% content_for :title, @user.name %>
<div class="px-4 py-4">
  <%= render BackButtonComponent.new(label: "Back", href: root_path) %>
</div>

<div class="max-w-xl mx-auto px-4 py-8 font-sans">
  
  <%# Industrial Container %>
  <div class="bg-[#F8F5EC] border-[3px] border-zinc-900 shadow-[8px_8px_0px_0px_rgba(20,20,23,0.8)] relative">
    
    <%# Header Section %>
    <div class="p-6 border-b-[3px] border-zinc-900 bg-white relative">
       <%# Background Grid %>
      <div class="absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:10px_10px]"></div>
      
      <div class="relative z-10 flex items-center justify-between">
        <h1 class="text-2xl font-black text-zinc-900 uppercase tracking-tighter">
           USER_PROFILE
        </h1>
        
        <span class="inline-flex items-center px-2 py-1 border-[2px] border-zinc-900 bg-zinc-100 text-zinc-900 text-[0.6rem] font-bold uppercase tracking-widest">
           ID_REF_<%= @user.id %>
        </span>
      </div>

       <%# Edit Button (Absolute) %>
       <% if Current.user == @user %>
        <%= link_to edit_user_path(@user), class: "absolute top-4 right-4 z-20 group" do %>
          <div class="w-8 h-8 flex items-center justify-center bg-white border-[2px] border-zinc-900 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:translate-y-0.5 hover:shadow-none transition-all">
             <%= icon_tag "pencil", class: "w-4 h-4 text-zinc-900" %>
          </div>
        <% end %>
       <% end %>
    </div>

    <%# Profile Body %>
    <div class="p-8 relative flex flex-col items-center gap-6">
       <%# Background Grid %>
       <div class="absolute inset-0 pointer-events-none bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-[size:20px_20px]"></div>
       
       <div class="relative z-10 flex flex-col items-center gap-4">
         <%# Industrial Avatar %>
         <div class="w-24 h-24 border-[3px] border-zinc-900 bg-zinc-900 flex items-center justify-center text-white text-4xl font-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
            <%= @user.name.first.upcase %>
         </div>
         
         <div class="flex flex-col items-center text-center gap-1">
            <h2 class="text-xl font-black text-zinc-900 uppercase tracking-tight"><%= @user.name %></h2>
            
            <div class="text-xs font-mono font-bold uppercase tracking-wider">
              <% if !@user.active? %>
                <span class="text-red-600">STATUS: INACTIVE</span>
              <% elsif !@user.verified? %>
                <span class="text-amber-600">STATUS: UNVERIFIED</span>
                <p class="text-[0.6rem] text-zinc-500 mt-1 max-w-xs">AWAITING_VERIFICATION_CODE</p>
              <% else %>
                <%= mail_to @user.identity.email_address, class: "text-zinc-500 hover:text-zinc-900 underline decoration-zinc-400 decoration-2 underline-offset-2" %>
              <% end %>
            </div>
         </div>
       </div>

       <% if Current.user == @user %>
        <div class="w-full h-[2px] bg-zinc-200 my-2"></div>

        <div class="w-full space-y-6 relative z-10">
           <%= render "users/transfer", user: @user %>
        </div>

        <div class="w-full flex justify-center pt-6">
           <%= button_to session_url, method: :delete, class: "group relative inline-flex items-center justify-center px-6 py-2 bg-white text-zinc-900 border-[2px] border-zinc-900 font-bold uppercase tracking-widest text-xs hover:bg-red-600 hover:text-white hover:border-red-600 transition-colors", data: { turbo: false } do %>
             TERMINATE_SESSION
           <% end %>
        </div>
       <% end %>
    </div>

    <%# Technical Footer %>
    <div class="h-4 border-t-[3px] border-zinc-900 bg-zinc-900"></div>
  </div>
</div>

<% content_for :footer do %>
  <%= render "sessions/footer" %>
<% end %>
